<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>【项目总结文档】Vue全家桶开发电商管理系统项目 | 超逸の博客</title><meta name="keywords" content="项目，知识梳理，前端"><meta name="author" content="一百个Chocolate"><meta name="copyright" content="一百个Chocolate"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="引言这个项目是我第二次做了，第一次做的时候好多地方不是很懂，而现在学习了基础知识后，回过来再做一次，发现原来不是很懂的地方也弄明白了，然后又在B站找了项目实战撸了一把，想通过这篇文章，对其中的模块实现做一下总结，同时希望能够加深对项目的理解，不断发掘其中的亮点。如果你觉得本文还行，请毫不留情的点赞！ element-ui篇element-ui 官方中文文档传送门 el-form 组件问题el-f">
<meta property="og:type" content="article">
<meta property="og:title" content="【项目总结文档】Vue全家桶开发电商管理系统项目">
<meta property="og:url" content="https://yangchaoyi.vip/posts/2020704/index.html">
<meta property="og:site_name" content="超逸の博客">
<meta property="og:description" content="引言这个项目是我第二次做了，第一次做的时候好多地方不是很懂，而现在学习了基础知识后，回过来再做一次，发现原来不是很懂的地方也弄明白了，然后又在B站找了项目实战撸了一把，想通过这篇文章，对其中的模块实现做一下总结，同时希望能够加深对项目的理解，不断发掘其中的亮点。如果你觉得本文还行，请毫不留情的点赞！ element-ui篇element-ui 官方中文文档传送门 el-form 组件问题el-f">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/chocolate1999/cdn/img/20200704214120.jpg">
<meta property="article:published_time" content="2021-05-07T13:48:39.303Z">
<meta property="article:modified_time" content="2021-05-07T13:48:39.304Z">
<meta property="article:author" content="一百个Chocolate">
<meta property="article:tag" content="项目">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/chocolate1999/cdn/img/20200704214120.jpg"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://yangchaoyi.vip/posts/2020704/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-05-07 21:48:39'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css"  media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/css/flink.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/css/iconfont.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Rr210/Lantern@2.4/dl.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"><meta name="generator" content="Hexo 5.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="wizard-scene"><div class="wizard-objects"><div class="wizard-square"></div><div class="wizard-circle"></div><div class="wizard-triangle"></div></div><div class="wizard"><div class="wizard-body"></div><div class="wizard-right-arm"><div class="wizard-right-hand"></div></div><div class="wizard-left-arm"><div class="wizard-left-hand"></div></div><div class="wizard-head"><div class="wizard-beard"></div><div class="wizard-face"><div class="wizard-adds"></div></div><div class="wizard-hat"><div class="wizard-hat-of-the-hat"></div><div class="wizard-four-point-star --first"></div><div class="wizard-four-point-star --second"></div><div class="wizard-four-point-star --third"></div></div></div></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/img/Chocolate.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">62</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">30</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/bangumis/"><i class="fa-fw fab fa-youtube"></i><span> 番剧</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/"><i class="fa-fw fas fa-gamepad"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw far fa-image"></i><span> 相册</span></a></li><li><a class="site-page" href="/home/"><i class="fa-fw fab fa-phoenix-framework"></i><span> 主页</span></a></li><li><a class="site-page" href="/sponsorWall/"><i class="fa-fw fas fa-money-check-alt"></i><span> 赞助墙</span></a></li><li><a class="site-page" href="/box/"><i class="fa-fw fas fa-th-large"></i><span> 聚宝盒</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://hearling.github.io/"><i class="fa-fw fas fa-book"></i><span> HearLingの博客</span></a></div><div class="menus_item"><a class="site-page" href="/talk/"><i class="fa-fw fas fa-coffee"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 关于</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="https://yangchaoyi.avosapps.us/"><i class="fa-fw fas fa-box"></i><span> Valine评论后台</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="https://console.leancloud.app/applist.html#/apps"><i class="fa-fw fas fa-box"></i><span> LeanCloud应用</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">超逸の博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/bangumis/"><i class="fa-fw fab fa-youtube"></i><span> 番剧</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/"><i class="fa-fw fas fa-gamepad"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw far fa-image"></i><span> 相册</span></a></li><li><a class="site-page" href="/home/"><i class="fa-fw fab fa-phoenix-framework"></i><span> 主页</span></a></li><li><a class="site-page" href="/sponsorWall/"><i class="fa-fw fas fa-money-check-alt"></i><span> 赞助墙</span></a></li><li><a class="site-page" href="/box/"><i class="fa-fw fas fa-th-large"></i><span> 聚宝盒</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://hearling.github.io/"><i class="fa-fw fas fa-book"></i><span> HearLingの博客</span></a></div><div class="menus_item"><a class="site-page" href="/talk/"><i class="fa-fw fas fa-coffee"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 关于</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="https://yangchaoyi.avosapps.us/"><i class="fa-fw fas fa-box"></i><span> Valine评论后台</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="https://console.leancloud.app/applist.html#/apps"><i class="fa-fw fas fa-box"></i><span> LeanCloud应用</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">【项目总结文档】Vue全家桶开发电商管理系统项目</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-05-07T13:48:39.303Z" title="发表于 2021-05-07 21:48:39">2021-05-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-05-07T13:48:39.304Z" title="更新于 2021-05-07 21:48:39">2021-05-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">10.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>38分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div><div class="top-img gist" style="background-image: url(/false)"></div><article class="post-content" id="article-container"><p><img src= "/img/loading.gif" data-lazy-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2Nob2NvbGF0ZTE5OTkvY2RuL2ltZy8yMDIwMDcwNDIxNDEyMC5qcGc?x-oss-process=image/format,png" alt=""></p>
<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>这个项目是我第二次做了，第一次做的时候好多地方不是很懂，而现在学习了基础知识后，回过来再做一次，发现原来不是很懂的地方也弄明白了，然后又在B站找了项目实战撸了一把，想通过这篇文章，对其中的模块实现做一下总结，同时希望能够加深对项目的理解，不断发掘其中的亮点。如果你觉得本文还行，请毫不留情的点赞！</p>
<h2 id="element-ui篇"><a href="#element-ui篇" class="headerlink" title="element-ui篇"></a>element-ui篇</h2><p><a target="_blank" rel="noopener" href="https://element.eleme.cn/#/zh-CN/component/installation">element-ui 官方中文文档传送门</a></p>
<h3 id="el-form-组件问题"><a href="#el-form-组件问题" class="headerlink" title="el-form 组件问题"></a>el-form 组件问题</h3><p><code>el-form</code> 组件默认是 <code>content-box</code>，我们设置其如下属性时，就会出现长度比我们想象中长一点的情况。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.login_form</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625151609765.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>解决办法如下，直接设置 <code>box-sizing</code> 为 <code>border-box</code> 即可。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.login_form</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="使用-iconfont-给输入框添加图标"><a href="#使用-iconfont-给输入框添加图标" class="headerlink" title="使用 iconfont 给输入框添加图标"></a>使用 iconfont 给输入框添加图标</h3><p>在 <code>main.js</code> 中导入字体图标<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625154012230.png" alt=""><br>然后在 <code>el-input</code> 组件中通过 <code>prefix-icon</code> 进行相关图标引用<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625154538688.png" alt=""><br>最终效果图如下：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625154619145.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="如何进行表单验证"><a href="#如何进行表单验证" class="headerlink" title="如何进行表单验证"></a>如何进行表单验证</h3><p><code>Form</code> 组件提供了表单验证的功能，只需要通过 <code>rules</code> 属性传入约定的验证规则，并将 <code>Form-Item</code> 的 <code>prop</code> 属性设置为需校验的字段名即可。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625160326747.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>通过 <code>rules</code> 属性传入约定的验证规则<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625160430877.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>将<code>Form-Item</code> 的 <code>prop</code> 属性设置为需校验的字段名<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625160417847.png" alt=""></p>
<h3 id="如何重置表单"><a href="#如何重置表单" class="headerlink" title="如何重置表单"></a>如何重置表单</h3><p><code>element-ui</code> 对表单提供了如下方法 <code>resetFields</code>，我们只需要获取表单对象数据即可重置我们的表单。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625160907353.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>获取表单对象方式如下：</p>
<p>直接在表单处添加 <code>ref</code>属性，如下 <code>loginFormRef</code>，此引用即为我们表单实例。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625161049896.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>然后，在我们重置按钮处，通过 <code>@click</code> 给按钮绑定一个事件<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625161224696.png" alt=""><br>下一步，添加方法，我们可以打印一下 <code>this</code><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625161531622.png" alt=""><br>不难发现，此时的 <code>this</code> 指向的就是我们当前登录组件 <code>login.vue</code>的实例对象。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625161715318.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>观察上图，我们看到有一个 <code>$refs</code> 属性，这个就是我们的表单实例。</p>
<p>此时，我们的方法就可以改写成如下方式：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625162008760.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<blockquote>
<p>最后，我们点击重置按钮后，会发现输入框并不是完全清空了，原因是data数据里面一开始我们设置了默认值，因此resetFields()函数就是清空为默认值。</p>
</blockquote>
<h3 id="登录预校验"><a href="#登录预校验" class="headerlink" title="登录预校验"></a>登录预校验</h3><blockquote>
<p>在我们点击登录按钮，不应该直接发起网络请求，而是应该对表单进行预校验，检验成功才会发送请求。</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625162900919.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>拿到表单引用对象，即可进行对表单的校验。</p>
<p>首先，给登录按钮通过 <code>@click</code> 来绑定一个事件<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625163054420.png" alt=""><br>下一步，在 <code>methods</code> 中添加 <code>login</code> 方法，<code>validate</code>函数参数为一个回调函数。该回调函数会在校验结束后被调用，并传入两个参数：是否校验成功和未通过校验的字段。若不传入回调函数，则会返回一个 <code>promise</code><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625163326719.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>此时，我们点击登录按钮，查看是否进行了预校验：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625163522941.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>此时，按照之前的校验规则，是存在问题的。所以返回 <code>false</code>。我们来一个正确示例吧：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/2020062516371351.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="配置弹框提示组件"><a href="#配置弹框提示组件" class="headerlink" title="配置弹框提示组件"></a>配置弹框提示组件</h3><p>首先，在 <code>element.js</code> 中导入弹框提示组件，但是它的配置与其它组件不一样，它需要进行全局挂载。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625170544575.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>全局导入后，我们就可以在我们的登录组件 <code>login.vue</code> 中通过 <code>this</code>来访问弹框提示组件了。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625170523514.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>测试一下，输入 <code>admin</code> 和 <code>123456</code>，此时就会提示输入成功。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625170502751.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="每一个组件都是一个类名"><a href="#每一个组件都是一个类名" class="headerlink" title="每一个组件都是一个类名"></a>每一个组件都是一个类名</h3><blockquote>
<p>每一个组件都是一个类名，我们可以直接增加效果属性。</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625204029790.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="el-menu-默认会有一个-border-right"><a href="#el-menu-默认会有一个-border-right" class="headerlink" title="el-menu 默认会有一个 border-right"></a>el-menu 默认会有一个 border-right</h3><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626084738793.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>这样会导致我们的菜单栏右边会有一个若隐若现的线条凸起<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626084808791.png" alt=""><br>解决办法如下，直接将 <code>el-menu</code> 的<code>border-right</code> 设置为 <code>none</code> 即可。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626084841591.png" alt=""></p>
<h3 id="表格展开页"><a href="#表格展开页" class="headerlink" title="表格展开页"></a>表格展开页</h3><p>只需要将 <code>el-table-column</code> 中 <code>type</code> 属性设为 <code>expand</code> 即能将表格进行展开。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626190138903.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>实现效果如下：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626190218268.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="使用树形控件-el-tree"><a href="#使用树形控件-el-tree" class="headerlink" title="使用树形控件 el-tree"></a>使用树形控件 el-tree</h3><p>对于分配权限一栏，我们需要如下效果：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627112742297.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627112805759.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<p>相关配置属性：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627111555828.png" alt=""><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627111606458.png" alt=""><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627111856396.png" alt=""></p>
<p>其中 <code>data</code> 为我们的数据源，<code>props</code> 为我们在 <code>tree</code>组件显示的文本内容。通过设置 <code>node-key</code>可以让每个树节点作为唯一标识的属性，整棵树是唯一的；通过设置 <code>default-expand-all</code> 来默认展开我们的所有节点，不需要每次都让用户去打开，体验感好；通过设置 <code>default-checked-keys</code>勾选我们已有的权限。</p>
<p>最后，我们通过递归的方式，判断当前 <code>node</code> 节点是否存在 <code>children</code>属性，如果不存在的话，就包含了三级权限，然后添加到我们的数组中，然后通过 <code>:default-checked-keys=&quot;defKeys&quot;</code> 来渲染选中当前已有的权限。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627112820403.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>此外，当我们关闭对话框时还需要监听一下关闭事件，不然每次数组都会保存原来的权限数据，导致一些问题。因此，监听 <code>close</code> 事件后，每次对话框关闭时，都将数组进行清空。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627113250495.png" alt=""><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627113240263.png" alt=""></p>
<p><strong>获取选中节点的keys：</strong></p>
<p>首先，给我们对话框的确定按钮绑定一个事件。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627115201785.png" alt=""><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627115223903.png" alt=""><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627115214947.png" alt=""><br>主要使用 <code>tree</code> 组件提供的两个方法 <code>getCheckedKeys</code> 和 <code>getHalfCheckedKeys</code>来分别返回目前被选中的节点的 <code>key</code> 所组成的数组和目前半选中的节点的 <code>key</code> 所组成的数组<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627115147590.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="使用动态编辑标签"><a href="#使用动态编辑标签" class="headerlink" title="使用动态编辑标签"></a>使用动态编辑标签</h3><p>实现效果如下：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200702213646205.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200702213736642.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>通过 <code>v-if</code> 的 <code>boolean</code>值来动态变化是否显示文本框还是 <code>button</code> 按钮。通过 <code>v-model</code> 双向绑定来实现文本框内容的监听。</p>
<p>由于每一行需要设置文本框的显示与隐藏，而且数据是共享的。我们需要通过 <code>scope</code>来获取每一行的值来进行绑定，不然的话，就会导致某个文本框显示了，其它文本框也跟着显示，并且数据是共用的，都会同步变化。而设置 <code>scope</code>后，我们就能实现对一行数据进行更新渲染了。</p>
<p>为了实现当我们点击按钮后，让本文看自动获取焦点。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200702214330279.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>通过 <code>this.$refs.saveTagInput.$refs.input.focus()</code> 来获取 <code>input</code> 的 <code>dom</code> 对象，接着调用 <code>focus</code>函数来获取焦点。</p>
<p><code>$nextTick</code> 作用是当页面元素被重新渲染之后才会执行回调函数中的代码。如果不这样做的话，我们直接通过点击按钮的形式，将该行的 <code>inputVisible</code> 设置为了 <code>true</code>，那么此时直接调用 <code>this.$refs.saveTagInput.$refs.input.focus()</code> 是没办法获取焦点的，此时就会报错。因为我们的 <code>dom</code>节点还没有进行渲染，而先调用 <code>$nextTick</code>  就是为了等待 <code>dom</code>节点渲染之后，我们再获取 <code>input</code>，然后再调用 <code>focus</code> 函数来获取焦点。</p>
<h2 id="步骤条的使用与美化"><a href="#步骤条的使用与美化" class="headerlink" title="步骤条的使用与美化"></a>步骤条的使用与美化</h2><p>以下就是步骤条使用的核心代码，其中 <code>active</code> 绑定的是每一个 <code>step</code> 的下标，默认从 <code>0</code> 开始。其次，我们可以设置 <code>aligin-center</code> 属性来让我们的步骤条进行居中。<code>el-step</code>就是每一个步骤进度。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- 步骤条区域 --&gt;</span><br><span class="line">&lt;el-steps :space=<span class="string">&quot;200&quot;</span> :active=<span class="string">&quot;activeIndex&quot;</span> finish-status=<span class="string">&quot;success&quot;</span> align-center&gt;</span><br><span class="line">   &lt;el-step title=<span class="string">&quot;基本信息&quot;</span>&gt;&lt;/el-step&gt;</span><br><span class="line">   &lt;el-step title=<span class="string">&quot;商品参数&quot;</span>&gt;&lt;/el-step&gt;</span><br><span class="line">   &lt;el-step title=<span class="string">&quot;商品属性&quot;</span>&gt;&lt;/el-step&gt;</span><br><span class="line">   &lt;el-step title=<span class="string">&quot;商品图片&quot;</span>&gt;&lt;/el-step&gt;</span><br><span class="line">   &lt;el-step title=<span class="string">&quot;商品内容&quot;</span>&gt;&lt;/el-step&gt;</span><br><span class="line">   &lt;el-step title=<span class="string">&quot;完成&quot;</span>&gt;&lt;/el-step&gt;</span><br><span class="line">&lt;/el-steps&gt;</span><br></pre></td></tr></table></figure>
<p>更改原本样式，得到我们想要的效果：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.el-steps</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.el-step__title</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最终实现效果如下：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703094313666.png" alt=""></p>
<h3 id="阻止页签tabs切换"><a href="#阻止页签tabs切换" class="headerlink" title="阻止页签tabs切换"></a>阻止页签tabs切换</h3><p>主要函数如下：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703104547500.png" alt=""><br>在我们的 <code>tabs</code> 标签页添加一个 <code>before-leave</code> 函数<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703104604112.png" alt=""></p>
<p>然后在 <code>methods</code> 中定义，根据第一个标签页的逻辑来阻止标签页的切换。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703104632688.png" alt=""></p>
<h3 id="Upload-上传组件"><a href="#Upload-上传组件" class="headerlink" title="Upload 上传组件"></a>Upload 上传组件</h3><blockquote>
<p>通过点击或者拖拽上传文件</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!-- action表示图片上传后台api地址 --&gt;</span><br><span class="line">&lt;el-upload</span><br><span class="line">    :action=<span class="string">&quot;uploadURL&quot;</span></span><br><span class="line">    :on-preview=<span class="string">&quot;handlePreview&quot;</span></span><br><span class="line">    :on-remove=<span class="string">&quot;handleRemove&quot;</span></span><br><span class="line">    list-type=<span class="string">&quot;picture&quot;</span></span><br><span class="line">&gt;</span><br><span class="line">    &lt;el-button size=<span class="string">&quot;small&quot;</span> type=<span class="string">&quot;primary&quot;</span>&gt;点击上传&lt;/el-button&gt;</span><br><span class="line">    &lt;div slot=<span class="string">&quot;tip&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;el-upload__tip&quot;</span>&gt;只能上传jpg/png文件，且不超过500kb&lt;/div&gt;</span><br><span class="line">&lt;/el-upload&gt;</span><br><span class="line"></span><br><span class="line">data---&gt;</span><br><span class="line"><span class="comment">// 上传图片的url</span></span><br><span class="line">uploadURL: <span class="string">&#x27;http://127.0.0.1:8888/api/private/v1/upload&#x27;</span></span><br></pre></td></tr></table></figure>
<p>配置如下之后，并不代表就真正上传了，此时，我们打开 <code>Network</code> 查看 <code>Preview</code> ，发现 <code>msg</code> 提示我们 <code>无效 token</code>，状态码为 <code>400</code> ，这代表并没有上传成功。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703115410989.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<p>这是因为此时上传控件没有使用 <code>axios</code> 发 <code>ajax</code> 请求，而是组件内部自动封装了一个 <code>ajax</code>，因此也就不会调用下述请求拦截器了。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703115748622.png" alt=""></p>
<p>解决办法是 <code>Upload</code> 组件有一个 <code>headers</code> 属性，可以设置上传的请求头部。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/2020070311582168.png" alt=""><br>第一步，在组件处添加 <code>headers</code> 属性<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703120057485.png" alt=""><br>第二步，在 <code>data</code> 中定义 <code>headersObj</code> ，然后添加请求头对象。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703120108511.png" alt=""><br>操作完成后，可以看到提示消息 <code>msg</code> 显示上传成功，并且此时状态码也变为了 <code>200</code>。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703120309502.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h4 id="监听图片上传成功事件"><a href="#监听图片上传成功事件" class="headerlink" title="监听图片上传成功事件"></a>监听图片上传成功事件</h4><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703143644529.png" alt=""><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703144027592.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703144007474.png" alt=""></p>
<h4 id="监听图片删除事件"><a href="#监听图片删除事件" class="headerlink" title="监听图片删除事件"></a>监听图片删除事件</h4><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703144136607.png" alt=""></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 处理图片移除的操作</span></span><br><span class="line"><span class="function"><span class="title">handleRemove</span>(<span class="params">file</span>)</span> &#123;</span><br><span class="line">  <span class="comment">// 1.获取将要删除的图片的临时路径</span></span><br><span class="line">  <span class="keyword">const</span> filePath = file.response.data.tmp_path</span><br><span class="line">  <span class="comment">// 2.从pics数组中，找到这个图片对应的索引值</span></span><br><span class="line">  <span class="keyword">const</span> idx = <span class="built_in">this</span>.addForm.pics.findIndex(<span class="function"><span class="params">x</span> =&gt;</span> x.pic === filePath)</span><br><span class="line">  <span class="comment">// 3.调用数组的 splice 方法，把图片信息对象，从pics数组中移除</span></span><br><span class="line">  <span class="built_in">this</span>.addForm.pics.splice(idx, <span class="number">1</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h4 id="处理图片预览操作"><a href="#处理图片预览操作" class="headerlink" title="处理图片预览操作"></a>处理图片预览操作</h4><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703145000386.png" alt=""><br>图片预览窗可以用 <code>el-dialog</code> 组件来做，然后通过 <code>on-preview</code> 函数来处理图片预览的操作。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!-- 图片预览 --&gt;</span><br><span class="line">&lt;el-dialog title=<span class="string">&quot;图片预览&quot;</span> :visible.sync=<span class="string">&quot;previewVisable&quot;</span> width=<span class="string">&quot;50%&quot;</span>&gt;</span><br><span class="line">  &lt;img :src=<span class="string">&quot;previewPath&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;previewImg&quot;</span>&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure>
<p>通过函数来获取上传图片的真实 <code>url</code> ，然后监听图片预览窗口的打开即可。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 处理图片预览的操作</span></span><br><span class="line"><span class="function"><span class="title">handlePreview</span>(<span class="params">file</span>)</span> &#123;</span><br><span class="line">  <span class="comment">// 获取图片显示的url</span></span><br><span class="line">  <span class="built_in">this</span>.previewPath = file.response.data.url</span><br><span class="line">  <span class="built_in">this</span>.previewVisable = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>最终效果如下：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703145522946.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="使用Timeline-时间线"><a href="#使用Timeline-时间线" class="headerlink" title="使用Timeline 时间线"></a>使用Timeline 时间线</h3><blockquote>
<p>可视化地呈现时间流信息。</p>
</blockquote>
<p>由于 <code>vue-cli-plugin-element</code> 最后更新时间是 <code>2019年1月</code>，而 <code>element-ui</code> 中 <code>Timeline 时间线</code>更新是在 <code>3月份</code>，因此我们没有办法直接进行引用。因此，我们直接通过手动导入的方式。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703165248390.png" alt=""></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703165415369.png" alt=""><br>然后，我们打开 <code>element.js</code>，进行导入</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Timeline <span class="keyword">from</span> <span class="string">&#x27;./timeline/index&#x27;</span></span><br><span class="line"><span class="keyword">import</span> TimelineItem <span class="keyword">from</span> <span class="string">&#x27;./timeline-item/index&#x27;</span></span><br></pre></td></tr></table></figure>
<p>同时，我们也需要导入我们的 <code>css</code> 样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;../../plugins/timeline/timeline.css&#x27;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;../../plugins/timeline-item/timeline-item.css&#x27;</span>;</span><br><span class="line"><span class="selector-class">.el-cascader</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/<span class="selector-tag">style</span>&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!-- 展示物流进度的对话框 --&gt;</span><br><span class="line">    &lt;el-dialog title=<span class="string">&quot;物流进度&quot;</span> :visible.sync=<span class="string">&quot;progressVisible&quot;</span> width=<span class="string">&quot;45%&quot;</span> @close=<span class="string">&quot;addressDialogClosed&quot;</span>&gt;</span><br><span class="line">      &lt;el-timeline&gt;</span><br><span class="line">        &lt;el-timeline-item</span><br><span class="line">          v-<span class="keyword">for</span>=<span class="string">&quot;(activity, index) in progressInfo&quot;</span></span><br><span class="line">          :key=<span class="string">&quot;index&quot;</span></span><br><span class="line">          :timestamp=<span class="string">&quot;activity.time&quot;</span>&gt;</span><br><span class="line">          &#123;&#123;activity.context&#125;&#125;</span><br><span class="line">        &lt;/el-timeline-item&gt;</span><br><span class="line">      &lt;/el-timeline&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure>
<p>最终实现效果：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703170551640.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h2 id="Vue篇"><a href="#Vue篇" class="headerlink" title="Vue篇"></a>Vue篇</h2><h3 id="如何导入全局样式表"><a href="#如何导入全局样式表" class="headerlink" title="如何导入全局样式表"></a>如何导入全局样式表</h3><p>直接在 <code>main.js</code>将相关样式导入即可</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">// 导入全局样式表</span><br><span class="line">import &#x27;./assets/css/global.css&#x27;</span><br></pre></td></tr></table></figure>
<h3 id="如何重定向路由"><a href="#如何重定向路由" class="headerlink" title="如何重定向路由"></a>如何重定向路由</h3><p>在 <code>router</code>配置页中使用 <code>redirect</code> 属性<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625152947308.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="element-ui-如何按需导入"><a href="#element-ui-如何按需导入" class="headerlink" title="element-ui 如何按需导入"></a>element-ui 如何按需导入</h3><p>在<code>element.js</code> 文件中，按照如下方式，进行按需导入即可。然后通过 <code>Vue.use()</code>方法进行引用。（优化点：也就是将组建导入都放在一起，如果组件过多的话，支持换行）<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625153050309.png" alt=""></p>
<h3 id="配置axios"><a href="#配置axios" class="headerlink" title="配置axios"></a>配置axios</h3><p>在 <code>main.js</code> 文件内进行配置<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625164858343.png" alt=""><br>那么，此时我们就可以通过 <code>this</code>访问登录组件原型上 <code>$http</code> 方法，来发起对后端的请求了。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625165149647.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="保存token"><a href="#保存token" class="headerlink" title="保存token"></a>保存token</h3><p>将登录成功之后的 <code>token</code>，保存到客户端的 <code>sessionStorage</code> 中</p>
<ul>
<li>项目中除了登录之外的其它 <code>api</code> 接口，必须在登录之后才能访问</li>
<li><code>token</code> 只应在当前网站打开期间生效，所以将 <code>token</code> 保存在 <code>sessionStorage</code> 中</li>
</ul>
<p>通过编程式导航跳转到后台主页，路由地址是 <code>/home</code></p>
<p>在我们进行登录请求时，我们不妨打印一下，请求过来的数据，如下，服务端那边会传过来一个 <code>token</code> 值。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625171505466.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>下一步，我们在登录成功后，将服务端返回过来的 <code>token</code>值直接种植到 <code>sessionStorage</code> 中，然后通过编程式导航跳转到后台主页（<code>/home</code>），通过 <code>$router.push()</code>方法即可。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625171850873.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>此时，我们打开浏览器 ，通过<code>F12</code> 查看<code>Application</code>属性，找到 <code>sessionStorage</code> 即可查看到我们刚刚种植的 <code>token</code> 值了。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625171834597.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="路由导航守卫控制访问权限"><a href="#路由导航守卫控制访问权限" class="headerlink" title="路由导航守卫控制访问权限"></a>路由导航守卫控制访问权限</h3><blockquote>
<p>如果用户没有登录，但是直接通过URL访问特定页面，需要重新导航到登录页面。</p>
</blockquote>
<p>在之前的操作中，我们登录之后会种植一个 <code>token</code> 值，表示我们登录成功了，那么此时我们将 <code>token</code> 值去掉呢？<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625172621914.png" alt=""><br>直接点击上述 <code>clear all</code> 按钮去掉之后，我们依旧是可以访问 <code>/home</code>的路由，没有登录也能访问我们的后台主页，这肯定不是我们想要的结果。</p>
<p>在 <code>router/index.js</code> 中进行相关配置，具体如下，调用路由实例 <code>router</code>的 <code>beforeEach</code>方法，即可挂载我们的路由导航守卫。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625173727414.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<blockquote>
<p>这里可能会有疑问，我们需要验证 token的正确性吗？<br>答案是不需要，因为前端只需要管要不要给用户呈现这个页面，而我们调用api时，后端会对我们的 token 值进行校验，前端不需要验证。</p>
</blockquote>
<h3 id="退出功能"><a href="#退出功能" class="headerlink" title="退出功能"></a>退出功能</h3><blockquote>
<p>基于 token 的方式实现退出比较简单，只需要销毁本地的 token 即可。这样，后续的请求就不会携带 token ，必须重新登录生成一个新的 token 之后才可以访问页面。</p>
</blockquote>
<p>那么，我们仅需要为退出按钮绑定一个事件即可。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/2020062520094541.png" alt=""><br>然后事件内容就是：先清空  <code>token</code>，然后跳转到我们的登录页面。</p>
<p>核心代码如下：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625200900889.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="JSON格式的配置文件"><a href="#JSON格式的配置文件" class="headerlink" title="JSON格式的配置文件"></a>JSON格式的配置文件</h3><p>在项目根目录创建名为 <code>.prettierrc</code> 的文件，增加如下代码：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;semi&quot;: false,</span><br><span class="line">  &quot;<span class="selector-tag">singleQuote</span>&quot;: <span class="selector-tag">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>semi</code>设置 <code>false</code>去掉分号，<code>singleQuote</code> 设置 <code>true</code>使用单引号。</p>
<p>此外，还可以禁用 <code>function</code> 处空格报错，增加如下代码：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&#x27;space-before-function-paren&#x27;: 0</span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625201939900.png" alt=""></p>
<h3 id="通过axios请求拦截器添加-token"><a href="#通过axios请求拦截器添加-token" class="headerlink" title="通过axios请求拦截器添加 token"></a>通过axios请求拦截器添加 token</h3><blockquote>
<p>通过axios请求拦截器添加 token，保证拥有获取数据的权限。</p>
</blockquote>
<p>原因是，后台那边除开登录的 <code>api</code>，其它都需要进行授权。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625224347531.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<p>因此，我们可以利用 <code>axios</code> 中<code>interceptors</code>属性，其中有一个成员 <code>request</code>，此时我们可以通过 <code>use</code> 函数为请求拦截器挂载一个回调函数，只要向服务器端发送了一个 <code>axios</code> 请求，会优先调用 <code>use</code> 函数。</p>
<p>首先，在 <code>main.js</code>添加如下代码：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/2020062522443885.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>此时，打印 <code>config</code>，查看结果如下，发现我们<code>headers</code> 字段并没有一些授权字段。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625222518186.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>此时，我们添加如下一行代码，通过 <code>token</code> 来进行授权。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625224847574.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>此时，在<code>Network</code>就能查看到有一个 <code>Authorization</code> 字段了，但这里是为 <code>null</code>，因为我们进行的是登录请求，在登录期间，服务器是不会颁发令牌(<code>token</code>)。如果登录之后，调用其它 <code>api</code> 接口的话，就会颁发相应的<code>token</code>令牌。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200625225114413.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="左侧菜单栏"><a href="#左侧菜单栏" class="headerlink" title="左侧菜单栏"></a>左侧菜单栏</h3><p>关于这一块的话，由于后台数据已经写好，我们只需要通过双层 <code>for</code> 循环即可渲染我们的菜单栏，注意点：</p>
<p><code>:index</code> 只能绑定字符串，因此将后台请求过来的 <code>id</code>值与空字符串进行拼接达到此效果，解决了点击某个菜单栏导致其它菜单栏同时打开的问题。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626002104223.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>最终实现效果如下：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626002121793.png" alt=""></p>
<h3 id="左侧菜单栏图标设计"><a href="#左侧菜单栏图标设计" class="headerlink" title="左侧菜单栏图标设计"></a>左侧菜单栏图标设计</h3><p>我们想要的效果如下：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626083953921.png" alt=""></p>
<p>如何设计？</p>
<p>首先，我们可以在 <code>data</code> 中定义一个对象，对应于每一个菜单选项的 <code>id</code><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626084013362.png" alt=""><br>然后通过 <code>for</code> 循环遍历每一个菜单选项的 <code>id</code>即可。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626084101527.png" alt=""></p>
<h3 id="保持一个子菜单的展开"><a href="#保持一个子菜单的展开" class="headerlink" title="保持一个子菜单的展开"></a>保持一个子菜单的展开</h3><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626084309100.png" alt=""><br>直接在侧边栏区域添加上述属性即可<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626084353999.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="让菜单栏展开与折叠"><a href="#让菜单栏展开与折叠" class="headerlink" title="让菜单栏展开与折叠"></a>让菜单栏展开与折叠</h3><blockquote>
<p>通过点击一个按钮，让侧边栏进行展开与折叠。通过 isCollapse 的值来动态变化侧边栏的宽度。</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626090702451.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626090849580.png" alt=""><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/2020062609090095.png" alt=""><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626090639490.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<blockquote>
<p>其中 cursor: pointer 设置是为了让鼠标放在折叠与展开处会有一个手指指向。<br>letter-spacing: 0.2em 是为了让 ||| 有一定间隔</p>
</blockquote>
<h3 id="实现首页路由重定向"><a href="#实现首页路由重定向" class="headerlink" title="实现首页路由重定向"></a>实现首页路由重定向</h3><p>我们想要在登录之后重定向到 <code>/welcome</code> 路径，于是需要添加子路由<code>children</code> 属性，然后设置 <code>redirect</code>重定向到我们的子路由。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626092041931.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>然后在我们组件 <code>Home.vue</code> 的右侧主体区域，放置一个路由占位符 <code>router-view</code> 即可。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626092331999.png" alt=""></p>
<h3 id="侧边栏路由改造"><a href="#侧边栏路由改造" class="headerlink" title="侧边栏路由改造"></a>侧边栏路由改造</h3><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626093427997.png" alt=""><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626093553305.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<p>通过给侧边栏设置 <code>router</code> 属性为 <code>true</code>，我们就能开启 <code>vue-router</code> 路由模式，然后将我们二级菜单的 <code>index</code> 属性绑定我们的数据 <code>path</code> 即可。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626093537398.png" alt=""></p>
<h3 id="在sessionStorage保存左侧菜单栏的激活状态"><a href="#在sessionStorage保存左侧菜单栏的激活状态" class="headerlink" title="在sessionStorage保存左侧菜单栏的激活状态"></a>在sessionStorage保存左侧菜单栏的激活状态</h3><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626110659178.png" alt=""></p>
<blockquote>
<p>为了让我们点击二级菜单时，会有一个激活效果，而且是保持状态，我们需要将利用 element-ui 菜单栏相关 <code>default-active</code> 属性，来让菜单保持激活。</p>
</blockquote>
<p>由于每个二级菜单都有一个路由链接，不妨将路由路径 <code>path</code> 存储在 <code>sessionStorage</code> 中，具体做法就是给二级菜单绑定一个事件：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626111037224.png" alt=""><br>每次触发点击事件，我们需要更新当前路由路径，才能让点击的那个按钮高亮。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626111005679.png" alt=""><br>然后在我们创建这个组件时，就获取当前的激活状态的路径即可。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626111059332.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>查看 <code>sessionStorage</code> ，可以看到我们存储的路由路径。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626111210909.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="slot插槽使用"><a href="#slot插槽使用" class="headerlink" title="slot插槽使用"></a>slot插槽使用</h3><blockquote>
<p>项目需求：由于用户列表状态后台返回的是 true/false，无法进行渲染，而我们需要的是有一个Switch开关来控制我们的状态。添加一个<code>template</code> 模板后，此时就可以用 <code>slot-scope</code> 作用域插槽来获取我们数据列表中的每一行数据，具体如下：</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626115207779.png" alt=""><br>最后，我们就可以得到如下效果图了：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626115215887.png" alt=""></p>
<h3 id="通过switch开关更改用户状态"><a href="#通过switch开关更改用户状态" class="headerlink" title="通过switch开关更改用户状态"></a>通过switch开关更改用户状态</h3><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626143922934.png" alt=""><br>首先，在 <code>switch</code> 开关添加一个 <code>change</code> 事件，并且通过作用域插槽的形式，将该行数据作为参数传入，目的是为了后续的修改。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626143944489.png" alt=""><br>在函数内我们将传递过来的参数作为我们请求的参数，通过 <code>put</code> 方式修改我们的后台数据。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626144204184.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="input输入框优化"><a href="#input输入框优化" class="headerlink" title="input输入框优化"></a>input输入框优化</h3><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626144910726.png" alt=""><br>通过增加 <code>clearable</code> 属性，我们的输入框就可以多一个 <code>x</code>，然后通过绑定 <code>clear</code> 事件，当我们进行清除 （即点击由 <code>clearable</code> 属性生成的清空按钮时触发)时，就会重新获取我们的用户列表，不再需要用户再次点击搜索按钮去获取了。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/2020062614490026.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="正则表达式验证邮箱和手机号码"><a href="#正则表达式验证邮箱和手机号码" class="headerlink" title="正则表达式验证邮箱和手机号码"></a>正则表达式验证邮箱和手机号码</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 验证邮箱的规则</span></span><br><span class="line">   <span class="keyword">var</span> checkEmail = <span class="function">(<span class="params">rule, value, cb</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">const</span> regEmail = <span class="regexp">/^([a-zA-Z]|[0-9])(\w|-)+@[a-zA-Z0-9]+\.([a-zA-Z]&#123;2,4&#125;)$/</span></span><br><span class="line">     <span class="keyword">if</span> (regEmail.test(value)) &#123;</span><br><span class="line">       <span class="comment">// 合法的邮箱</span></span><br><span class="line">       <span class="keyword">return</span> cb()</span><br><span class="line">     &#125;</span><br><span class="line">     cb(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;请输入合法的邮箱&#x27;</span>))</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 验证手机号码的规则</span></span><br><span class="line">   <span class="keyword">var</span> checkMobile = <span class="function">(<span class="params">rule, value, cb</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">const</span> regMobile = <span class="regexp">/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]&#123;8&#125;$/</span></span><br><span class="line">     <span class="keyword">if</span> (regMobile.test(value)) &#123;</span><br><span class="line">       <span class="comment">// 合法的手机号码</span></span><br><span class="line">       <span class="keyword">return</span> cb()</span><br><span class="line">     &#125;</span><br><span class="line">     cb(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;手机号码格式不正确&#x27;</span>))</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200626153231594.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="使用vue-table-with-tree-grid"><a href="#使用vue-table-with-tree-grid" class="headerlink" title="使用vue-table-with-tree-grid"></a>使用vue-table-with-tree-grid</h3><p>安装新的依赖 <code>vue-tabel-with-tree-grid</code><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627164719423.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br><a target="_blank" rel="noopener" href="https://github.com/MisterTaki/vue-table-with-tree-grid">vue-tabel-with-tree-grid 官方文档</a></p>
<p>安装完成后，在 <code>main.js</code> 入口文件内先导入 <code>tree-tabel</code><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627165055586.png" alt=""><br>然后全局注册组件 <code>tree-tabel</code><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627165101828.png" alt=""><br>页面中，我们使用了如下属性：</p>
<p><code>data</code> 确定我们的数据源，<code>columns</code>定义我们的指定列，<code>selection-type</code> 设置是否打开多选框，<code>expand-type</code> 设置是否展示展开栏，<code>show-index</code> 添加索引列， <code>border</code> 给表格添加边框。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627170313347.png" alt=""></p>
<p><strong>使用模板列：</strong></p>
<p>通过在<code>columns</code> 设置 <code>type</code> 属性值为 <code>template</code>，即可设置模板列。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627203159721.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>然后在我们界面表格区域，添加一个 <code>template</code> 模板，然后设置作用域插槽 <code>slot</code> 为在数据块定义的模板名称 <code>isOk</code><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200627203244176.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="自定义格式化时间的全局过滤器"><a href="#自定义格式化时间的全局过滤器" class="headerlink" title="自定义格式化时间的全局过滤器"></a>自定义格式化时间的全局过滤器</h3><p>在 <code>main.js</code> 入口文件全局注册格式化时间的过滤器，代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 自定义格式化时间的全局过滤器</span></span><br><span class="line">Vue.filter(<span class="string">&#x27;dataFormat&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">originVal</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> dt = <span class="keyword">new</span> <span class="built_in">Date</span>(originVal)</span><br><span class="line">  <span class="keyword">const</span> year = dt.getFullYear()</span><br><span class="line">  <span class="keyword">const</span> mon = (dt.getMonth() + <span class="number">1</span> + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> day = (dt.getDate() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> hh = (dt.getHours() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> mm = (dt.getMinutes() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> ss = (dt.getSeconds() + <span class="string">&#x27;&#x27;</span>).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;year&#125;</span>-<span class="subst">$&#123;mon&#125;</span>-<span class="subst">$&#123;day&#125;</span> <span class="subst">$&#123;hh&#125;</span>:<span class="subst">$&#123;mm&#125;</span>:<span class="subst">$&#123;ss&#125;</span>`</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>在我们的组件当中，通过 <code>|</code> 来给我们的时间添加一个过滤器<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703092217671.png" alt=""></p>
<p>最终实现效果如下图所示：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703092252595.png" alt=""></p>
<h3 id="添加富文本编辑器"><a href="#添加富文本编辑器" class="headerlink" title="添加富文本编辑器"></a>添加富文本编辑器</h3><p><a target="_blank" rel="noopener" href="https://github.com/surmon-china/vue-quill-editor">vue-quill-editor 官方文档传送门</a></p>
<p>通过 <code>vue-ui</code> 界面，可以安装我们所需要的依赖，或者使用下文 <code>npm</code> 或 <code>yarn</code>安装。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703150054951.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h4 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm install vue-quill-editor --save</span><br><span class="line"></span><br><span class="line"># or</span><br><span class="line">yarn add vue-quill-editor</span><br></pre></td></tr></table></figure>
<h4 id="Mount-with-global"><a href="#Mount-with-global" class="headerlink" title="Mount with global"></a>Mount with global</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueQuillEditor <span class="keyword">from</span> <span class="string">&#x27;vue-quill-editor&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;quill/dist/quill.core.css&#x27;</span> <span class="comment">// import styles</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;quill/dist/quill.snow.css&#x27;</span> <span class="comment">// for snow theme</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;quill/dist/quill.bubble.css&#x27;</span> <span class="comment">// for bubble theme</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueQuillEditor, <span class="comment">/* &#123; default global options &#125; */</span>)</span><br></pre></td></tr></table></figure>
<p>打开 <code>main.js</code> 入口文件，进行全局导入和注册：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 导入富文本编辑器</span></span><br><span class="line"><span class="keyword">import</span> VueQuillEditor <span class="keyword">from</span> <span class="string">&#x27;vue-quill-editor&#x27;</span></span><br><span class="line"><span class="comment">// 导入富文本编辑器对应的样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;quill/dist/quill.core.css&#x27;</span> <span class="comment">// import styles</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;quill/dist/quill.snow.css&#x27;</span> <span class="comment">// for snow theme</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;quill/dist/quill.bubble.css&#x27;</span> <span class="comment">// for bubble theme</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将富文本编辑器进行全局注册</span></span><br><span class="line">Vue.use(VueQuillEditor<span class="comment">/* &#123; default global options &#125; */</span>)</span><br></pre></td></tr></table></figure>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>通过 <code>quill-editor</code> 标签，然后通过 <code>v-model</code> 双向绑定到 <code>form</code>表单的商品详情描述变量 <code>goods_introduce</code> 上。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703151515853.png" alt=""><br>最终实现效果如下：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703151525386.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h3 id="使用-lodash-中-cloneDeep-obj-来实现深拷贝"><a href="#使用-lodash-中-cloneDeep-obj-来实现深拷贝" class="headerlink" title="使用 lodash 中 cloneDeep(obj) 来实现深拷贝"></a>使用 lodash 中 cloneDeep(obj) 来实现深拷贝</h3><p><a target="_blank" rel="noopener" href="https://lodash.com/">lodash 官方文档传送门</a><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703152709568.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h4 id="Using-npm"><a href="#Using-npm" class="headerlink" title="Using npm"></a>Using npm</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$ npm i -g npm</span><br><span class="line">$ npm i --save lodash</span><br></pre></td></tr></table></figure>
<h4 id="cloneDeep-value-使用"><a href="#cloneDeep-value-使用" class="headerlink" title="_.cloneDeep(value) 使用"></a>_.cloneDeep(value) 使用</h4><p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703152824969.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>项目中使用 <code>cloneDeep</code> 需求：由于 <code>addForm</code> 中商品所属的分类数组 <code>goods_cat</code>在商品分类模块需要使用 <code>v-model</code> 进行双向绑定数组形式，而我们调用添加商品 <code>api</code> 时，需要字符串形式的，这就产生了冲突，于是我们可以通过<strong>深拷贝</strong>操作来达到我们的需要。</p>
<p>首先，导入 <code>lodash</code>。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703153150968.png" alt=""><br>然后，直接调用 <code>lodash</code> 中 <code>cloneDeep</code> 方法实现对对象的深拷贝。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703153449429.png" alt=""></p>
<h3 id="使用-echarts"><a href="#使用-echarts" class="headerlink" title="使用 echarts"></a>使用 echarts</h3><p><a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/tutorial.html#5%20%E5%88%86%E9%92%9F%E4%B8%8A%E6%89%8B%20ECharts">echarts 官方文档传送门</a><br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703171208299.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>根据官方文档示例，我们先展示测试数据。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 面包屑导航区域 --&gt;</span><br><span class="line">    &lt;el-breadcrumb separator=<span class="string">&quot;/&quot;</span>&gt;</span><br><span class="line">      &lt;el-breadcrumb-item :to=<span class="string">&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;</span>&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;数据统计&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;数据报表&lt;/el-breadcrumb-item&gt;</span><br><span class="line">    &lt;/el-breadcrumb&gt;</span><br><span class="line">    &lt;!-- 卡片视图 --&gt;</span><br><span class="line">    &lt;el-card&gt;</span><br><span class="line">      &lt;!-- <span class="number">2.</span>为ECharts准备一个具备大小（宽高）的Dom --&gt;</span><br><span class="line">      &lt;div id=<span class="string">&quot;main&quot;</span> style=<span class="string">&quot;width: 600px;height:400px;&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">// 1.导入echarts</span></span><br><span class="line"><span class="keyword">import</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 3.基于准备好的dom，初始化echarts实例</span></span><br><span class="line">    <span class="keyword">var</span> myChart = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;main&#x27;</span>))</span><br><span class="line">    <span class="comment">// 4.准备数据和配置项</span></span><br><span class="line">    <span class="keyword">var</span> option = &#123;</span><br><span class="line">      title: &#123;</span><br><span class="line">        text: <span class="string">&#x27;ECharts 入门示例&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      tooltip: &#123;&#125;,</span><br><span class="line">      legend: &#123;</span><br><span class="line">        data: [<span class="string">&#x27;销量&#x27;</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      xAxis: &#123;</span><br><span class="line">        data: [<span class="string">&#x27;衬衫&#x27;</span>, <span class="string">&#x27;羊毛衫&#x27;</span>, <span class="string">&#x27;雪纺衫&#x27;</span>, <span class="string">&#x27;裤子&#x27;</span>, <span class="string">&#x27;高跟鞋&#x27;</span>, <span class="string">&#x27;袜子&#x27;</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      yAxis: &#123;&#125;,</span><br><span class="line">      series: [</span><br><span class="line">        &#123;</span><br><span class="line">          name: <span class="string">&#x27;销量&#x27;</span>,</span><br><span class="line">          type: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">          data: [<span class="number">5</span>, <span class="number">20</span>, <span class="number">36</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">20</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 5.使用刚指定的配置项和数据显示图表。</span></span><br><span class="line">    myChart.setOption(option)</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;&#125;,</span><br><span class="line">  methods: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;less&quot;</span> scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>最终实现效果：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703171907263.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<p>由于通过 <code>$http</code>获取得到的数据缺少鼠标跟随的效果，于是需要将 <code>options</code> 进行合并操作，此时使用了 <code>lodash</code>的 <code>merge</code> 函数。核心代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 4.准备数据和配置项(res.data)</span></span><br><span class="line"><span class="keyword">const</span> result = _.merge(res.data, <span class="built_in">this</span>.options)</span><br></pre></td></tr></table></figure>
<p>在此提供数据报表折线图绘制的源代码：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 面包屑导航区域 --&gt;</span><br><span class="line">    &lt;el-breadcrumb separator=<span class="string">&quot;/&quot;</span>&gt;</span><br><span class="line">      &lt;el-breadcrumb-item :to=<span class="string">&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;</span>&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;数据统计&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;数据报表&lt;/el-breadcrumb-item&gt;</span><br><span class="line">    &lt;/el-breadcrumb&gt;</span><br><span class="line">    &lt;!-- 卡片视图 --&gt;</span><br><span class="line">    &lt;el-card&gt;</span><br><span class="line">      &lt;!-- <span class="number">2.</span>为ECharts准备一个具备大小（宽高）的Dom --&gt;</span><br><span class="line">      &lt;div id=<span class="string">&quot;main&quot;</span> style=<span class="string">&quot;width: 750px;height:400px;&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">// 1.导入echarts</span></span><br><span class="line"><span class="keyword">import</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span></span><br><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">/* 需要合并的数据 */</span></span><br><span class="line">      options: &#123;</span><br><span class="line">        title: &#123;</span><br><span class="line">          text: <span class="string">&#x27;用户来源&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">          trigger: <span class="string">&#x27;axis&#x27;</span>,</span><br><span class="line">          axisPointer: &#123;</span><br><span class="line">            type: <span class="string">&#x27;cross&#x27;</span>,</span><br><span class="line">            label: &#123;</span><br><span class="line">              backgroundColor: <span class="string">&#x27;#E9EEF3&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        grid: &#123;</span><br><span class="line">          left: <span class="string">&#x27;3%&#x27;</span>,</span><br><span class="line">          right: <span class="string">&#x27;4%&#x27;</span>,</span><br><span class="line">          bottom: <span class="string">&#x27;3%&#x27;</span>,</span><br><span class="line">          containLabel: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        xAxis: [</span><br><span class="line">          &#123;</span><br><span class="line">            boundaryGap: <span class="literal">false</span></span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        yAxis: [</span><br><span class="line">          &#123;</span><br><span class="line">            type: <span class="string">&#x27;value&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 3.基于准备好的dom，初始化echarts实例</span></span><br><span class="line">    <span class="keyword">var</span> myChart = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;main&#x27;</span>))</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> <span class="built_in">this</span>.$http.get(<span class="string">&#x27;reports/type/1&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.$message.error(<span class="string">&#x27;获取折线图数据失败！&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4.准备数据和配置项(res.data)</span></span><br><span class="line">    <span class="keyword">const</span> result = _.merge(res.data, <span class="built_in">this</span>.options)</span><br><span class="line">    <span class="comment">// 5.使用刚指定的配置项和数据显示图表。</span></span><br><span class="line">    myChart.setOption(result)</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;&#125;,</span><br><span class="line">  methods: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;less&quot;</span> scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>最终实现效果如下：<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703172454508.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h2 id="项目优化上线"><a href="#项目优化上线" class="headerlink" title="项目优化上线"></a>项目优化上线</h2><blockquote>
<p>优化Vue项目，部署Vue项目</p>
</blockquote>
<h3 id="项目优化"><a href="#项目优化" class="headerlink" title="项目优化"></a>项目优化</h3><h4 id="添加进度条"><a href="#添加进度条" class="headerlink" title="添加进度条"></a>添加进度条</h4><p><a target="_blank" rel="noopener" href="https://github.com/rstacruz/nprogress">nprogress 进度条官方文档传送门</a></p>
<p>打开 <code>vue-ui</code> 面板，选择依赖，输入 <code>nprogress</code> 进行安装相关依赖。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703191749286.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h5 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm install --save  nprogress</span><br></pre></td></tr></table></figure>
<p>在 <code>main.js</code> 入口文件中，进行相关配置。首先先导入包对应的<code>js</code> 和 <code>css</code>：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 导入NProgress包对应的js和css</span></span><br><span class="line"><span class="keyword">import</span> NProgress <span class="keyword">from</span> <span class="string">&#x27;nprogress&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;nprogress/nprogress.css&#x27;</span></span><br></pre></td></tr></table></figure>
<p>配置 <code>request</code> 请求拦截器 和 <code>response</code> 响应拦截器，这样我们就能在每次网络请求时能够展示进度条了。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在 request 拦截器中，显示进度条 NProgress.start()</span></span><br><span class="line"><span class="comment">// 设置axios请求拦截器</span></span><br><span class="line">axios.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  NProgress.start()</span><br><span class="line">  config.headers.Authorization = <span class="built_in">window</span>.sessionStorage.getItem(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">  <span class="comment">// console.log(config)</span></span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 在 response 拦截器中，隐藏进度条 NProgress.done()</span></span><br><span class="line">axios.interceptors.response.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  NProgress.done()</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="执行build-时报错"><a href="#执行build-时报错" class="headerlink" title="执行build 时报错"></a>执行build 时报错</h4><p><code>Error: No module factory available for dependency type: CssDependency</code></p>
<p>解决办法：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45615791/article/details/104294458">参考：解决webpack打包报错 No module factory available for dependency type: CssDependency</a></p>
<h4 id="在执行-build-命令期间移除所有的-console"><a href="#在执行-build-命令期间移除所有的-console" class="headerlink" title="在执行 build 命令期间移除所有的 console"></a>在执行 <code>build</code> 命令期间移除所有的 <code>console</code></h4><p><a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-plugin-transform-remove-console">babel-plugin-transform-remove-console 官方文档传送门</a></p>
<p>可以通过 <code>vue-ui</code> 面板，选择开发依赖，然后输入 <code>babel-plugin-transform-remove-console</code> 进行安装<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/2020070319434356.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<p><strong>npm</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm install babel-plugin-transform-remove-<span class="built_in">console</span> --save-dev</span><br></pre></td></tr></table></figure>
<p>安装依赖之后，打开 <code>babel.config.js</code>文件，在 <code>plugins</code> 插件处，添加一个字符串，<code>&#39;transform-remove-console&#39;</code>，如下图所示位置。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    <span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  plugins: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;component&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        libraryName: <span class="string">&#x27;element-ui&#x27;</span>,</span><br><span class="line">        styleLibraryName: <span class="string">&#x27;theme-chalk&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;transform-remove-console&#x27;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述设置好了之后，还存在一个问题，我们只需要在发布阶段才会去除 <code>console</code> ，在开发和测试环境下如果去除了 <code>console</code>，对于我们调试方面不太好。因此，我们需要设置只在<strong>生产环境</strong>下去除 <code>console</code>。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703195601960.png" alt=""><br>通过上下两个图比较，我们可以发现，在开发环境下 <code>mode</code> 值为 <code>development</code>，而在生产环境下<code>mode</code> 值为 <code>production</code>。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200703195740375.png" alt=""><br>因此，上述代码就需要进行些微修改，如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 项目发布阶段需要用到的 babel 插件</span></span><br><span class="line"><span class="keyword">const</span> prodPlugins = []</span><br><span class="line"><span class="comment">// 判断编译模式为生产环境</span></span><br><span class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">  prodPlugins.push(<span class="string">&#x27;transform-remove-console&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    <span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  plugins: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;component&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        libraryName: <span class="string">&#x27;element-ui&#x27;</span>,</span><br><span class="line">        styleLibraryName: <span class="string">&#x27;theme-chalk&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    ...prodPlugins</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="生成打包报告"><a href="#生成打包报告" class="headerlink" title="生成打包报告"></a>生成打包报告</h4><blockquote>
<p>打包时，为了直观地发现项目中存在的问题，可以在打包时生成报告。生成报告的方式有两种：</p>
</blockquote>
<p>① 通过命令行参数的形式生成报告</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过 vue-cli 的命令选项可以生成打包报告</span></span><br><span class="line"><span class="comment">// --report 选项可以生成 report.html 以帮助分析包内容</span></span><br><span class="line">vue-cli-service build --report</span><br></pre></td></tr></table></figure>
<p>② 通过可视化的UI面板直接查看报告（<strong>推荐</strong>）</p>
<p>在可视化的UI面板中，通过<strong>控制台</strong>和<strong>分析</strong>面板，可以方便地看到项目中所存在的问题。</p>
<h4 id="通过-vue-config-js-修改-webpack-的默认配置"><a href="#通过-vue-config-js-修改-webpack-的默认配置" class="headerlink" title="通过 vue.config.js 修改 webpack 的默认配置"></a>通过 vue.config.js 修改 webpack 的默认配置</h4><p>通过 <code>vue-cli 3.0</code> 工具生成的项目，<strong>默认隐藏了所有 webpack 的配置项</strong>，目的是为了屏蔽项目的配置过程，让程<br>序员把工作的重心，放到具体功能和业务逻辑的实现上。</p>
<p>如果程序员有修改 webpack 默认配置的需求，可以在项目根目录中，按需创建 <code>vue.config.js</code> 这个配置文件，从<br>而对项目的打包发布过程做自定义的配置</p>
<p>（具体配置参考<a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/config/#vue-config-js">https://cli.vuejs.org/zh/config/#vue-config-js</a>）。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="comment">// 这个文件中，应该导出一个包含了自定义配置选项的对象</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"><span class="comment">// 选项...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="为开发模式与发布模式指定不同的打包入口"><a href="#为开发模式与发布模式指定不同的打包入口" class="headerlink" title="为开发模式与发布模式指定不同的打包入口"></a>为开发模式与发布模式指定不同的打包入口</h4><p>默认情况下，Vue项目的<strong>开发模式</strong>与<strong>发布模式</strong>，共用同一个打包的入口文件（即 <code>src/main.js</code>）。为了将项目<br>的开发过程与发布过程分离，我们可以为两种模式，各自指定打包的入口文件，即：</p>
<ul>
<li>开发模式的入口文件为 <code>src/main-dev.js</code></li>
<li>发布模式的入口文件为 <code>src/main-prod.js</code></li>
</ul>
<p><code>configureWebpack</code> 和 <code>chainWebpack</code></p>
<p>在 <code>vue.config.js</code> 导出的配置对象中，新增 <code>configureWebpack</code> 或<code>chainWebpack</code>节点，来自定义 <code>webpack</code> 的打包配置。</p>
<p>在这里， <code>configureWebpack</code> 和 <code>chainWebpack</code> 的作用相同，唯一的区别就是它们修改 webpack 配置的方式不同：</p>
<p>① <code>chainWebpack</code> 通过链式编程的形式，来修改默认的 <code>webpack</code> 配置<br>② <code>configureWebpack</code> 通过操作对象的形式，来修改默认的 <code>webpack</code> 配置</p>
<p>两者具体的使用差异，可参考如下网址：</p>
<p><a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/guide/webpack.html#webpack-%E7%9B%B8%E5%85%B3">传送门</a></p>
<h5 id="通过-chainWebpack-自定义打包入口"><a href="#通过-chainWebpack-自定义打包入口" class="headerlink" title="通过 chainWebpack 自定义打包入口"></a>通过 chainWebpack 自定义打包入口</h5><p>示例代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">		config.when(process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>, <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">		config.entry(<span class="string">&#x27;app&#x27;</span>).clear().add(<span class="string">&#x27;./src/main-prod.js&#x27;</span>)</span><br><span class="line">	&#125;)</span><br><span class="line">	config.when(process.env.NODE_ENV === <span class="string">&#x27;development&#x27;</span>, <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">	config.entry(<span class="string">&#x27;app&#x27;</span>).clear().add(<span class="string">&#x27;./src/main-dev.js&#x27;</span>)</span><br><span class="line">	&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="第三方库使用CDN"><a href="#第三方库使用CDN" class="headerlink" title="第三方库使用CDN"></a>第三方库使用CDN</h4><h5 id="通过-externals-加载外部-CDN-资源"><a href="#通过-externals-加载外部-CDN-资源" class="headerlink" title="通过 externals 加载外部 CDN 资源"></a>通过 externals 加载外部 CDN 资源</h5><p>默认情况下，通过 <code>import</code> 语法导入的第三方依赖包，最终会被打包合并到同一个文件中，从而导致打包成功后，单文件体积过大的问题。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/2020070323105910.png" alt=""><br>例如上述 <code>chunk-vendors.js</code> 体积很大，原因是全部 <code>import</code> 所依赖的包进行了合并给它。</p>
<p>为了解决上述问题，可以通过 <code>webpack</code> 的 <code>externals</code> 节点，来配置并加载外部的 <code>CDN</code> 资源。凡是声明在<code>externals</code> 中的第三方依赖包，都不会被打包。</p>
<p><strong>具体配置代码如下</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">config.set(<span class="string">&#x27;externals&#x27;</span>, &#123;</span><br><span class="line">	vue: <span class="string">&#x27;Vue&#x27;</span>,</span><br><span class="line">	<span class="string">&#x27;vue-router&#x27;</span>: <span class="string">&#x27;VueRouter&#x27;</span>,</span><br><span class="line">	axios: <span class="string">&#x27;axios&#x27;</span>,</span><br><span class="line">	lodash: <span class="string">&#x27;_&#x27;</span>,</span><br><span class="line">	echarts: <span class="string">&#x27;echarts&#x27;</span>,</span><br><span class="line">	nprogress: <span class="string">&#x27;NProgress&#x27;</span>,</span><br><span class="line">	<span class="string">&#x27;vue-quill-editor&#x27;</span>: <span class="string">&#x27;VueQuillEditor&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>同时，需要在 <code>public/index.html</code> 文件的头部，添加如下的 <code>CDN</code> 资源引用：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;!<span class="selector-tag">--</span> <span class="selector-tag">nprogress</span> 的样式表文件 <span class="selector-tag">--</span>&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css&quot; /&gt;</span><br><span class="line">&lt;!<span class="selector-tag">--</span> 富文本编辑器 的样式表文件 <span class="selector-tag">--</span>&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/quill/1.3.4/quill.core.min.css&quot; /&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/quill/1.3.4/quill.snow.min.css&quot; /&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/quill/1.3.4/quill.bubble.min.css&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>同时，需要在 <code>public/index.html</code> 文件的头部，添加如下的 <code>CDN</code> 资源引用：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;https://cdn.staticfile.org/vue/2.5.22/vue.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.staticfile.org/vue-router/3.0.1/vue-router.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.staticfile.org/axios/0.18.0/axios.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.staticfile.org/lodash.js/4.17.11/lodash.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.staticfile.org/echarts/4.1.0/echarts.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- 富文本编辑器的 js 文件 --&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.staticfile.org/quill/1.3.4/quill.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue-quill-editor@3.0.4/dist/vue-quill-editor.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="Element-UI-组件按需加载"><a href="#Element-UI-组件按需加载" class="headerlink" title="Element-UI 组件按需加载"></a>Element-UI 组件按需加载</h4><h5 id="通过-CDN-优化-ElementUI-的打包"><a href="#通过-CDN-优化-ElementUI-的打包" class="headerlink" title="通过 CDN 优化 ElementUI 的打包"></a>通过 CDN 优化 ElementUI 的打包</h5><p>虽然在开发阶段，我们启用了 element-ui 组件的按需加载，尽可能的减少了打包的体积，但是那些被按需加载的组件，还是占用了较大的文件体积。此时，我们可以将 <code>element-ui</code> 中的组件，也通过 <code>CDN</code> 的形式来加载，这样能够进一步减小打包后的文件体积。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200704000508793.png" alt=""><br>具体操作流程如下：<br>① 在 <code>main-prod.js</code> 中，注释掉 <code>element-ui</code> 按需加载的代码<br>② 在  <code>public/index.html</code>  的头部区域中，通过 <code>CDN</code> 加载 <code>element-ui</code> 的 <code>js</code> 和 <code>css</code> 样式</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- element-ui 的样式表文件 --&gt;</span><br><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;https://cdn.staticfile.org/element-ui/2.8.2/theme-</span></span><br><span class="line"><span class="string">chalk/index.css&quot;</span> /&gt;</span><br><span class="line">&lt;!-- element-ui 的 js 文件 --&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.staticfile.org/element-ui/2.8.2/index.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200704001002855.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h4 id="首页内容定制"><a href="#首页内容定制" class="headerlink" title="首页内容定制"></a>首页内容定制</h4><blockquote>
<p>不同的打包环境下，首页内容可能会有所不同。我们可以通过插件的方式进行定制，插件配置如下：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">	config.when(process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>, <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">	config.plugin(<span class="string">&#x27;html&#x27;</span>).tap(<span class="function"><span class="params">args</span> =&gt;</span> &#123;</span><br><span class="line">		args[<span class="number">0</span>].isProd = <span class="literal">true</span></span><br><span class="line">	<span class="keyword">return</span> args</span><br><span class="line">	&#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">	config.when(process.env.NODE_ENV === <span class="string">&#x27;development&#x27;</span>, <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">	config.plugin(<span class="string">&#x27;html&#x27;</span>).tap(<span class="function"><span class="params">args</span> =&gt;</span> &#123;</span><br><span class="line">		args[<span class="number">0</span>].isProd = <span class="literal">false</span></span><br><span class="line">	<span class="keyword">return</span> args</span><br><span class="line">	&#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 <code>public/index.html</code> 首页中，可以根据 <code>isProd</code> 的值，来决定如何渲染页面结构：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!–- 按需渲染页面的标题 --&gt;</span><br><span class="line">&lt;title&gt;&lt;%= htmlWebpackPlugin.options.isProd ? <span class="string">&#x27;&#x27;</span> : <span class="string">&#x27;dev - &#x27;</span> %&gt;电商后台管理系统&lt;/title&gt;</span><br><span class="line">&lt;!–- 按需加载外部的 CDN 资源 --&gt;</span><br><span class="line">&lt;% <span class="keyword">if</span>(htmlWebpackPlugin.options.isProd) &#123; %&gt;</span><br><span class="line">&lt;!—- 通过 externals 加载的外部 CDN 资源--&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>
<h4 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a>路由懒加载</h4><p>当打包构建项目时，<code>JavaScript</code> 包会变得非常大，影响页面加载。如果我们能把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应组件，这样就更加高效了。</p>
<p>具体需要 3 步：</p>
<ul>
<li>安装 <code>@babel/plugin-syntax-dynamic-import</code>包。</li>
<li>在 <code>babel.config.js</code> 配置文件中声明该插件。</li>
<li>将路由改为按需加载的形式，示例代码如下：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// /* webpackChunkName: &quot;group-foo&quot; */表示路由分组</span></span><br><span class="line"><span class="comment">// &#x27;./Foo.vue&#x27; 表示路由存放路径</span></span><br><span class="line"><span class="keyword">const</span> Foo = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: &quot;group-foo&quot; */</span> <span class="string">&#x27;./Foo.vue&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> Bar = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: &quot;group-foo&quot; */</span> <span class="string">&#x27;./Bar.vue&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> Baz = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: &quot;group-boo&quot; */</span> <span class="string">&#x27;./Baz.vue&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>分在同一个组内的组件，当请求其中某一个组件时，组内其它组件也会同时请求。</p>
<p>关于路由懒加载的详细文档，可参考如下链接：</p>
<p><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/guide/advanced/lazy-loading.html">https://router.vuejs.org/zh/guide/advanced/lazy-loading.html</a></p>
<p><a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-plugin-syntax-dynamic-import/">@babel/plugin-syntax-dynamic-import 插件介绍传送门</a></p>
<p><strong>npm</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm install --save-dev @babel/plugin-syntax-dynamic-<span class="keyword">import</span></span><br></pre></td></tr></table></figure>
<p>打开 <code>vue-ui</code> 面板，选择开发依赖，输入 <code>@babel/plugin-syntax-dynamic-import</code> 进行安装。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/2020070410192225.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<p>然后打开 <code>babel.config.js</code> 文件，在 <code>plugins</code> 数组内添加我们安装的依赖: <code>&#39;@babel/plugin-syntax-dynamic-import&#39;</code>，具体位置见下文所示：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 项目发布阶段需要用到的 babel 插件</span></span><br><span class="line"><span class="keyword">const</span> prodPlugins = []</span><br><span class="line"><span class="comment">// 判断编译模式为生产环境</span></span><br><span class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">  prodPlugins.push(<span class="string">&#x27;transform-remove-console&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    <span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  plugins: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;component&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        libraryName: <span class="string">&#x27;element-ui&#x27;</span>,</span><br><span class="line">        styleLibraryName: <span class="string">&#x27;theme-chalk&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    ...prodPlugins,</span><br><span class="line">    <span class="string">&#x27;@babel/plugin-syntax-dynamic-import&#x27;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后，将每一个组件更改为懒加载的形式：</p>
<h3 id="项目上线"><a href="#项目上线" class="headerlink" title="项目上线"></a>项目上线</h3><ol>
<li>通过 node 创建 web 服务器。</li>
<li>开启 gzip 配置。</li>
<li>配置 https 服务。</li>
<li>使用 pm2 管理应用。</li>
</ol>
<h4 id="通过-node-创建-web-服务器"><a href="#通过-node-创建-web-服务器" class="headerlink" title="通过 node 创建 web 服务器"></a>通过 node 创建 web 服务器</h4><p>创建 <code>node</code> 项目，并安装 <code>express</code>，通过 <code>express</code> 快速创建 <code>web</code> 服务器，将 <code>vue</code> 打包生成的 <code>dist</code> 文件夹，托管为静态资源即可，关键代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// 创建 web 服务器</span></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 托管静态资源</span></span><br><span class="line">app.use(express.static(<span class="string">&#x27;./dist&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动 web 服务器</span></span><br><span class="line">app.listen(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;web server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>第一步，先创建一个文件夹，这里命名为 <code>vue_shop_server</code>，然后通过 <code>Code</code> 打开。<br>新建一个终端，输入 <code>npm init -y</code> 执行，初始化包管理配置文件。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200704103747836.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""><br>初始化完成后，执行 <code>npm install express -S</code> 安装 <code>express</code></p>
<p>接下来，将我们 <code>vue</code> 项目通过 <code>build</code> 打包得到的 <code>dist</code> 文件夹复制一份，粘贴到我们的 <code>vue_shop_server</code>文件夹内，然后再新建一个 <code>app.js</code> 入口文件，结构图如下图所示。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200704110048836.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<p>测试服务器是否能够运行，新建终端，执行 <code>node .\app.js</code> 命令。如果发现输出了 <code>web server running at http://127.0.0.1</code> 则表示服务已经启动了。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200704104537994.png" alt=""></p>
<h4 id="开启-gzip-配置"><a href="#开启-gzip-配置" class="headerlink" title="开启 gzip 配置"></a>开启 gzip 配置</h4><p>配置完之前服务之后，我们打开网站后，发现请求网络中文件体积依旧是很大，如下图所示。<br><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200704105355366.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQyOTcxOA==,size_16,color_FFFFFF,t_70" alt=""></p>
<p>使用 <code>gzip</code> 可以减小文件体积，使传输速度更快。</p>
<p> 可以通过服务器端使用 <code>Express</code> 做 <code>gzip</code> 压缩。其配置如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 安装相应包</span></span><br><span class="line">npm install compression -S</span><br><span class="line"><span class="comment">// 导入包</span></span><br><span class="line"><span class="keyword">const</span> compression = <span class="built_in">require</span>(<span class="string">&#x27;compression&#x27;</span>);</span><br><span class="line"><span class="comment">// 启用中间件</span></span><br><span class="line">app.use(compression());</span><br></pre></td></tr></table></figure>
<p>此时的 <code>app.js</code> 文件代码如下所示，注意，<strong>一定要把启用中间件放在托管静态资源之前！</strong> 不然 <code>gzip</code> 压缩不会生效。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// 导入包</span></span><br><span class="line"><span class="keyword">const</span> compression = <span class="built_in">require</span>(<span class="string">&#x27;compression&#x27;</span>);</span><br><span class="line"><span class="comment">// 创建 web 服务器</span></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"><span class="comment">// 启用中间件</span></span><br><span class="line">app.use(compression());</span><br><span class="line"><span class="comment">// 托管静态资源</span></span><br><span class="line">app.use(express.static(<span class="string">&#x27;./dist&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动 web 服务器</span></span><br><span class="line">app.listen(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;web server running at http://127.0.0.1&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="配置-HTTPS-服务"><a href="#配置-HTTPS-服务" class="headerlink" title="配置 HTTPS 服务"></a>配置 HTTPS 服务</h4><h5 id="为什么要启用-HTTPS-服务？"><a href="#为什么要启用-HTTPS-服务？" class="headerlink" title="为什么要启用 HTTPS 服务？"></a>为什么要启用 HTTPS 服务？</h5><ul>
<li>传统的 <code>HTTP</code> 协议传输的数据都是明文，不安全</li>
<li>采用 <code>HTTPS</code> 协议对传输的数据进行了加密处理，可以防止数据被中间人窃取，使用更安全</li>
</ul>
<h5 id="申请-SSL-证书（https-freessl-org）"><a href="#申请-SSL-证书（https-freessl-org）" class="headerlink" title="申请 SSL 证书（https://freessl.org）"></a>申请 SSL 证书（<a target="_blank" rel="noopener" href="https://freessl.org）">https://freessl.org）</a></h5><ul>
<li>进入 <a target="_blank" rel="noopener" href="https://freessl.cn/">https://freessl.cn/</a> 官网，输入要申请的域名并选择品牌。</li>
<li>输入自己的邮箱并选择相关选项。</li>
<li>验证 DNS（在域名管理后台添加 TXT 记录）。</li>
<li>验证通过之后，下载 SSL 证书（ <code>full_chain.pem</code> 公钥；<code>private.key</code> 私钥）。</li>
</ul>
<h5 id="在后台项目中导入证书"><a href="#在后台项目中导入证书" class="headerlink" title="在后台项目中导入证书"></a>在后台项目中导入证书</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> https = <span class="built_in">require</span>(<span class="string">&#x27;https&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">	cert: fs.readFileSync(<span class="string">&#x27;./full_chain.pem&#x27;</span>),</span><br><span class="line">	key: fs.readFileSync(<span class="string">&#x27;./private.key&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">https.createServer(options, app).listen(<span class="number">443</span>);</span><br></pre></td></tr></table></figure>
<p>此时 <code>app.js</code> 配置代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="comment">// 导入包</span></span><br><span class="line"><span class="keyword">const</span> compression = <span class="built_in">require</span>(<span class="string">&#x27;compression&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> https = <span class="built_in">require</span>(<span class="string">&#x27;https&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">// 创建 web 服务器</span></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">	cert: fs.readFileSync(<span class="string">&#x27;./full_chain.pem&#x27;</span>),</span><br><span class="line">	key: fs.readFileSync(<span class="string">&#x27;./private.key&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启用中间件</span></span><br><span class="line">app.use(compression());</span><br><span class="line"><span class="comment">// 托管静态资源</span></span><br><span class="line">app.use(express.static(<span class="string">&#x27;./dist&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动 web 服务器</span></span><br><span class="line"><span class="comment">// app.listen(80, () =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   console.log(&#x27;web server running at http://127.0.0.1&#x27;)</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line">https.createServer(options, app).listen(<span class="number">443</span>);</span><br></pre></td></tr></table></figure>
<h4 id="使用-pm2-管理应用"><a href="#使用-pm2-管理应用" class="headerlink" title="使用 pm2 管理应用"></a>使用 pm2 管理应用</h4><p>① 在服务器中安装 <code>pm2</code>：<code>npm i pm2 -g</code><br>② 启动项目：<code>pm2 start</code> 脚本 <code>--name</code> 自定义名称<br>③ 查看运行项目：<code>pm2 ls</code><br>④ 重启项目：<code>pm2 restart</code> 自定义名称<br>⑤ 停止项目：<code>pm2 stop</code> 自定义名称<br>⑥ 删除项目：<code>pm2 delete</code> 自定义名称</p>
<h4 id="解决Error-ENOENT-no-such-file-or-directory-scandir-‘xxx-node-sass-vendor’"><a href="#解决Error-ENOENT-no-such-file-or-directory-scandir-‘xxx-node-sass-vendor’" class="headerlink" title="解决Error: ENOENT: no such file or directory, scandir ‘xxx\node-sass\vendor’"></a>解决Error: ENOENT: no such file or directory, scandir ‘xxx\node-sass\vendor’</h4><p>解决方案是执行以下方法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm rebuild node-sass</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1EE411B7SU?p=5">项目学习地址</a></p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">一百个Chocolate</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://yangchaoyi.vip/posts/2020704/">https://yangchaoyi.vip/posts/2020704/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://yangchaoyi.vip" target="_blank">超逸の博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%A1%B9%E7%9B%AE/">项目</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/chocolate1999/cdn/img/20200704214120.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/35726/"><img class="prev-cover" data-lazy-src="https://ae01.alicdn.com/kf/Hc7003b394f7440209633feb249c080a4O.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Hexo 添加加载动画</div></div></a></div><div class="next-post pull-right"><a href="/posts/2020709/"><img class="next-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/chocolate1999/cdn/img/20200708170355.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">【后台API接口文档】Vue全家桶开发电商管理系统</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/35725/" title="【Vue全家桶+SSR+Koa2全栈开发】项目搭建过程  整合  学习目录（持续更新中）"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/chocolate1999/cdn/img/20200526104803.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-07</div><div class="title">【Vue全家桶+SSR+Koa2全栈开发】项目搭建过程  整合  学习目录（持续更新中）</div></div></a></div><div><a href="/posts/2020709/" title="【后台API接口文档】Vue全家桶开发电商管理系统"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/chocolate1999/cdn/img/20200708170355.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-07</div><div class="title">【后台API接口文档】Vue全家桶开发电商管理系统</div></div></a></div><div><a href="/posts/34924/" title="2020 零基础到快速开发  Vue全家桶开发电商管理系统（Element-UI）【目录】"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/chocolate1999/cdn/img/20200526110732.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-07</div><div class="title">2020 零基础到快速开发  Vue全家桶开发电商管理系统（Element-UI）【目录】</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="/img/Chocolate.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">一百个Chocolate</div><div class="author-info__description">不是只会写业务代码的前端攻城狮！</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">62</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">30</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Chocolate1999"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://chocolate.blog.csdn.net/" target="_blank" title=""><i class="iconfont icon-csdn"></i></a><a class="social-icon" href="https://juejin.im/user/5ed1c55be51d457889261840/posts" target="_blank" title=""><i class="iconfont icon-juejin"></i></a><a class="social-icon" href="https://github.com/Chocolate1999" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://space.bilibili.com/351534170" target="_blank" title=""><i class="iconfont icon-bilibili1"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>小狮子初心</span></div><div class="announcement_content">最近收到了很多小伙伴的关注，在此非常感谢各位的支持。<br/>Chocolate 开通了个人公众号，在这里分享我的大厂面试经历，租房攻略，计算机领域那些事儿。<br/>希望小伙伴们能够喜欢我的文章，这里是小狮子前端，保持狮子座的热情带给你学习的动力，愿我们成为最好的自己~<br/><img src="https://cdn.jsdelivr.net/gh/chocolate1999/cdn/img/20201202223856.jpg"> <br/>QQ交流群：666151691</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">引言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#element-ui%E7%AF%87"><span class="toc-number">2.</span> <span class="toc-text">element-ui篇</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#el-form-%E7%BB%84%E4%BB%B6%E9%97%AE%E9%A2%98"><span class="toc-number">2.1.</span> <span class="toc-text">el-form 组件问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-iconfont-%E7%BB%99%E8%BE%93%E5%85%A5%E6%A1%86%E6%B7%BB%E5%8A%A0%E5%9B%BE%E6%A0%87"><span class="toc-number">2.2.</span> <span class="toc-text">使用 iconfont 给输入框添加图标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81"><span class="toc-number">2.3.</span> <span class="toc-text">如何进行表单验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%87%8D%E7%BD%AE%E8%A1%A8%E5%8D%95"><span class="toc-number">2.4.</span> <span class="toc-text">如何重置表单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E9%A2%84%E6%A0%A1%E9%AA%8C"><span class="toc-number">2.5.</span> <span class="toc-text">登录预校验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%BC%B9%E6%A1%86%E6%8F%90%E7%A4%BA%E7%BB%84%E4%BB%B6"><span class="toc-number">2.6.</span> <span class="toc-text">配置弹框提示组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%8F%E4%B8%80%E4%B8%AA%E7%BB%84%E4%BB%B6%E9%83%BD%E6%98%AF%E4%B8%80%E4%B8%AA%E7%B1%BB%E5%90%8D"><span class="toc-number">2.7.</span> <span class="toc-text">每一个组件都是一个类名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#el-menu-%E9%BB%98%E8%AE%A4%E4%BC%9A%E6%9C%89%E4%B8%80%E4%B8%AA-border-right"><span class="toc-number">2.8.</span> <span class="toc-text">el-menu 默认会有一个 border-right</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E6%A0%BC%E5%B1%95%E5%BC%80%E9%A1%B5"><span class="toc-number">2.9.</span> <span class="toc-text">表格展开页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%A0%91%E5%BD%A2%E6%8E%A7%E4%BB%B6-el-tree"><span class="toc-number">2.10.</span> <span class="toc-text">使用树形控件 el-tree</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8A%A8%E6%80%81%E7%BC%96%E8%BE%91%E6%A0%87%E7%AD%BE"><span class="toc-number">2.11.</span> <span class="toc-text">使用动态编辑标签</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4%E6%9D%A1%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%8E%E7%BE%8E%E5%8C%96"><span class="toc-number">3.</span> <span class="toc-text">步骤条的使用与美化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%BB%E6%AD%A2%E9%A1%B5%E7%AD%BEtabs%E5%88%87%E6%8D%A2"><span class="toc-number">3.1.</span> <span class="toc-text">阻止页签tabs切换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Upload-%E4%B8%8A%E4%BC%A0%E7%BB%84%E4%BB%B6"><span class="toc-number">3.2.</span> <span class="toc-text">Upload 上传组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E6%88%90%E5%8A%9F%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.2.1.</span> <span class="toc-text">监听图片上传成功事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E5%9B%BE%E7%89%87%E5%88%A0%E9%99%A4%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.2.2.</span> <span class="toc-text">监听图片删除事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%9B%BE%E7%89%87%E9%A2%84%E8%A7%88%E6%93%8D%E4%BD%9C"><span class="toc-number">3.2.3.</span> <span class="toc-text">处理图片预览操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Timeline-%E6%97%B6%E9%97%B4%E7%BA%BF"><span class="toc-number">3.3.</span> <span class="toc-text">使用Timeline 时间线</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue%E7%AF%87"><span class="toc-number">4.</span> <span class="toc-text">Vue篇</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%AF%BC%E5%85%A5%E5%85%A8%E5%B1%80%E6%A0%B7%E5%BC%8F%E8%A1%A8"><span class="toc-number">4.1.</span> <span class="toc-text">如何导入全局样式表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%87%8D%E5%AE%9A%E5%90%91%E8%B7%AF%E7%94%B1"><span class="toc-number">4.2.</span> <span class="toc-text">如何重定向路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#element-ui-%E5%A6%82%E4%BD%95%E6%8C%89%E9%9C%80%E5%AF%BC%E5%85%A5"><span class="toc-number">4.3.</span> <span class="toc-text">element-ui 如何按需导入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEaxios"><span class="toc-number">4.4.</span> <span class="toc-text">配置axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%9D%E5%AD%98token"><span class="toc-number">4.5.</span> <span class="toc-text">保存token</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB%E6%8E%A7%E5%88%B6%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90"><span class="toc-number">4.6.</span> <span class="toc-text">路由导航守卫控制访问权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%80%E5%87%BA%E5%8A%9F%E8%83%BD"><span class="toc-number">4.7.</span> <span class="toc-text">退出功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON%E6%A0%BC%E5%BC%8F%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.8.</span> <span class="toc-text">JSON格式的配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87axios%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA%E5%99%A8%E6%B7%BB%E5%8A%A0-token"><span class="toc-number">4.9.</span> <span class="toc-text">通过axios请求拦截器添加 token</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A6%E4%BE%A7%E8%8F%9C%E5%8D%95%E6%A0%8F"><span class="toc-number">4.10.</span> <span class="toc-text">左侧菜单栏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A6%E4%BE%A7%E8%8F%9C%E5%8D%95%E6%A0%8F%E5%9B%BE%E6%A0%87%E8%AE%BE%E8%AE%A1"><span class="toc-number">4.11.</span> <span class="toc-text">左侧菜单栏图标设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%9D%E6%8C%81%E4%B8%80%E4%B8%AA%E5%AD%90%E8%8F%9C%E5%8D%95%E7%9A%84%E5%B1%95%E5%BC%80"><span class="toc-number">4.12.</span> <span class="toc-text">保持一个子菜单的展开</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A9%E8%8F%9C%E5%8D%95%E6%A0%8F%E5%B1%95%E5%BC%80%E4%B8%8E%E6%8A%98%E5%8F%A0"><span class="toc-number">4.13.</span> <span class="toc-text">让菜单栏展开与折叠</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E9%A6%96%E9%A1%B5%E8%B7%AF%E7%94%B1%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">4.14.</span> <span class="toc-text">实现首页路由重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%A7%E8%BE%B9%E6%A0%8F%E8%B7%AF%E7%94%B1%E6%94%B9%E9%80%A0"><span class="toc-number">4.15.</span> <span class="toc-text">侧边栏路由改造</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8sessionStorage%E4%BF%9D%E5%AD%98%E5%B7%A6%E4%BE%A7%E8%8F%9C%E5%8D%95%E6%A0%8F%E7%9A%84%E6%BF%80%E6%B4%BB%E7%8A%B6%E6%80%81"><span class="toc-number">4.16.</span> <span class="toc-text">在sessionStorage保存左侧菜单栏的激活状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slot%E6%8F%92%E6%A7%BD%E4%BD%BF%E7%94%A8"><span class="toc-number">4.17.</span> <span class="toc-text">slot插槽使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87switch%E5%BC%80%E5%85%B3%E6%9B%B4%E6%94%B9%E7%94%A8%E6%88%B7%E7%8A%B6%E6%80%81"><span class="toc-number">4.18.</span> <span class="toc-text">通过switch开关更改用户状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#input%E8%BE%93%E5%85%A5%E6%A1%86%E4%BC%98%E5%8C%96"><span class="toc-number">4.19.</span> <span class="toc-text">input输入框优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%AA%8C%E8%AF%81%E9%82%AE%E7%AE%B1%E5%92%8C%E6%89%8B%E6%9C%BA%E5%8F%B7%E7%A0%81"><span class="toc-number">4.20.</span> <span class="toc-text">正则表达式验证邮箱和手机号码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8vue-table-with-tree-grid"><span class="toc-number">4.21.</span> <span class="toc-text">使用vue-table-with-tree-grid</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%97%B6%E9%97%B4%E7%9A%84%E5%85%A8%E5%B1%80%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">4.22.</span> <span class="toc-text">自定义格式化时间的全局过滤器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">4.23.</span> <span class="toc-text">添加富文本编辑器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#NPM"><span class="toc-number">4.23.1.</span> <span class="toc-text">NPM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mount-with-global"><span class="toc-number">4.23.2.</span> <span class="toc-text">Mount with global</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">4.23.3.</span> <span class="toc-text">使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-lodash-%E4%B8%AD-cloneDeep-obj-%E6%9D%A5%E5%AE%9E%E7%8E%B0%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">4.24.</span> <span class="toc-text">使用 lodash 中 cloneDeep(obj) 来实现深拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Using-npm"><span class="toc-number">4.24.1.</span> <span class="toc-text">Using npm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cloneDeep-value-%E4%BD%BF%E7%94%A8"><span class="toc-number">4.24.2.</span> <span class="toc-text">_.cloneDeep(value) 使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-echarts"><span class="toc-number">4.25.</span> <span class="toc-text">使用 echarts</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96%E4%B8%8A%E7%BA%BF"><span class="toc-number">5.</span> <span class="toc-text">项目优化上线</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96"><span class="toc-number">5.1.</span> <span class="toc-text">项目优化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E8%BF%9B%E5%BA%A6%E6%9D%A1"><span class="toc-number">5.1.1.</span> <span class="toc-text">添加进度条</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#npm"><span class="toc-number">5.1.1.1.</span> <span class="toc-text">npm</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A7%E8%A1%8Cbuild-%E6%97%B6%E6%8A%A5%E9%94%99"><span class="toc-number">5.1.2.</span> <span class="toc-text">执行build 时报错</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E6%89%A7%E8%A1%8C-build-%E5%91%BD%E4%BB%A4%E6%9C%9F%E9%97%B4%E7%A7%BB%E9%99%A4%E6%89%80%E6%9C%89%E7%9A%84-console"><span class="toc-number">5.1.3.</span> <span class="toc-text">在执行 build 命令期间移除所有的 console</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E6%89%93%E5%8C%85%E6%8A%A5%E5%91%8A"><span class="toc-number">5.1.4.</span> <span class="toc-text">生成打包报告</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-vue-config-js-%E4%BF%AE%E6%94%B9-webpack-%E7%9A%84%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE"><span class="toc-number">5.1.5.</span> <span class="toc-text">通过 vue.config.js 修改 webpack 的默认配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E4%B8%8E%E5%8F%91%E5%B8%83%E6%A8%A1%E5%BC%8F%E6%8C%87%E5%AE%9A%E4%B8%8D%E5%90%8C%E7%9A%84%E6%89%93%E5%8C%85%E5%85%A5%E5%8F%A3"><span class="toc-number">5.1.6.</span> <span class="toc-text">为开发模式与发布模式指定不同的打包入口</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-chainWebpack-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%89%93%E5%8C%85%E5%85%A5%E5%8F%A3"><span class="toc-number">5.1.6.1.</span> <span class="toc-text">通过 chainWebpack 自定义打包入口</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E4%BD%BF%E7%94%A8CDN"><span class="toc-number">5.1.7.</span> <span class="toc-text">第三方库使用CDN</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-externals-%E5%8A%A0%E8%BD%BD%E5%A4%96%E9%83%A8-CDN-%E8%B5%84%E6%BA%90"><span class="toc-number">5.1.7.1.</span> <span class="toc-text">通过 externals 加载外部 CDN 资源</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Element-UI-%E7%BB%84%E4%BB%B6%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD"><span class="toc-number">5.1.8.</span> <span class="toc-text">Element-UI 组件按需加载</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-CDN-%E4%BC%98%E5%8C%96-ElementUI-%E7%9A%84%E6%89%93%E5%8C%85"><span class="toc-number">5.1.8.1.</span> <span class="toc-text">通过 CDN 优化 ElementUI 的打包</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5%E5%86%85%E5%AE%B9%E5%AE%9A%E5%88%B6"><span class="toc-number">5.1.9.</span> <span class="toc-text">首页内容定制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="toc-number">5.1.10.</span> <span class="toc-text">路由懒加载</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF"><span class="toc-number">5.2.</span> <span class="toc-text">项目上线</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-node-%E5%88%9B%E5%BB%BA-web-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">5.2.1.</span> <span class="toc-text">通过 node 创建 web 服务器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%90%AF-gzip-%E9%85%8D%E7%BD%AE"><span class="toc-number">5.2.2.</span> <span class="toc-text">开启 gzip 配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-HTTPS-%E6%9C%8D%E5%8A%A1"><span class="toc-number">5.2.3.</span> <span class="toc-text">配置 HTTPS 服务</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%90%AF%E7%94%A8-HTTPS-%E6%9C%8D%E5%8A%A1%EF%BC%9F"><span class="toc-number">5.2.3.1.</span> <span class="toc-text">为什么要启用 HTTPS 服务？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%B3%E8%AF%B7-SSL-%E8%AF%81%E4%B9%A6%EF%BC%88https-freessl-org%EF%BC%89"><span class="toc-number">5.2.3.2.</span> <span class="toc-text">申请 SSL 证书（https:&#x2F;&#x2F;freessl.org）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E5%90%8E%E5%8F%B0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%AF%BC%E5%85%A5%E8%AF%81%E4%B9%A6"><span class="toc-number">5.2.3.3.</span> <span class="toc-text">在后台项目中导入证书</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-pm2-%E7%AE%A1%E7%90%86%E5%BA%94%E7%94%A8"><span class="toc-number">5.2.4.</span> <span class="toc-text">使用 pm2 管理应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3Error-ENOENT-no-such-file-or-directory-scandir-%E2%80%98xxx-node-sass-vendor%E2%80%99"><span class="toc-number">5.2.5.</span> <span class="toc-text">解决Error: ENOENT: no such file or directory, scandir ‘xxx\node-sass\vendor’</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/20210506/" title="时隔两个月，来一份总结【文末彩蛋】"><img data-lazy-src="https://cdn.jsdelivr.net/gh/chocolate1999/cdn/img/20210506215206.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="时隔两个月，来一份总结【文末彩蛋】"/></a><div class="content"><a class="title" href="/posts/20210506/" title="时隔两个月，来一份总结【文末彩蛋】">时隔两个月，来一份总结【文末彩蛋】</a><time datetime="2021-05-07T14:38:41.474Z" title="发表于 2021-05-07 22:38:41">2021-05-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/50975/" title="15个前端攻城狮必备的学习网站 | 你知道几个？（附视频介绍）"><img data-lazy-src="https://cdn.jsdelivr.net/gh/chocolate1999/cdn/img/20200610155519.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="15个前端攻城狮必备的学习网站 | 你知道几个？（附视频介绍）"/></a><div class="content"><a class="title" href="/posts/50975/" title="15个前端攻城狮必备的学习网站 | 你知道几个？（附视频介绍）">15个前端攻城狮必备的学习网站 | 你知道几个？（附视频介绍）</a><time datetime="2021-05-07T13:48:39.367Z" title="发表于 2021-05-07 21:48:39">2021-05-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/20541/" title="前端知识梳理之webpack篇"><img data-lazy-src="https://cdn.jsdelivr.net/gh/chocolate1999/cdn/img/20200914094504.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前端知识梳理之webpack篇"/></a><div class="content"><a class="title" href="/posts/20541/" title="前端知识梳理之webpack篇">前端知识梳理之webpack篇</a><time datetime="2021-05-07T13:48:39.366Z" title="发表于 2021-05-07 21:48:39">2021-05-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/20201009/" title="某跳动面试官：说说微信扫码登录背后的实现原理？"><img data-lazy-src="https://cdn.jsdelivr.net/gh/chocolate1999/cdn/img/20201009202845.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="某跳动面试官：说说微信扫码登录背后的实现原理？"/></a><div class="content"><a class="title" href="/posts/20201009/" title="某跳动面试官：说说微信扫码登录背后的实现原理？">某跳动面试官：说说微信扫码登录背后的实现原理？</a><time datetime="2021-05-07T13:48:39.366Z" title="发表于 2021-05-07 21:48:39">2021-05-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/205511/" title="前端知识梳理之Vue篇"><img data-lazy-src="https://cdn.jsdelivr.net/gh/chocolate1999/cdn/img/20200911085935.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前端知识梳理之Vue篇"/></a><div class="content"><a class="title" href="/posts/205511/" title="前端知识梳理之Vue篇">前端知识梳理之Vue篇</a><time datetime="2021-05-07T13:48:39.365Z" title="发表于 2021-05-07 21:48:39">2021-05-07</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021  <i id="heartbeat" class="fa fas fa-heartbeat"></i> 一百个Chocolate</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><p><a style="margin-inline:5px" target="_blank" href="https://hexo.io/"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a><a style="margin-inline:5px" target="_blank" href="https://butterfly.js.org/"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用butterfly"></a><a style="margin-inline:5px" target="_blank" href="https://www.jsdelivr.com/"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用JsDelivr为静态资源提供CDN加速"></a><a style="margin-inline:5px" target="_blank" href="https://vercel.com/ "><img src="https://img.shields.io/badge/Hosted-Vervel-brightgreen?style=flat&logo=Vercel" title="本站采用双线部署，默认线路托管于Vercel"></a><a style="margin-inline:5px" target="_blank" href="https://vercel.com/ "><img src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&logo=Codio" title="本站采用双线部署，联通线路托管于Coding"></a><a style="margin-inline:5px" target="_blank" href="https://github.com/"><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由Gtihub托管"></a><a style="margin-inline:5px" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div><div class="icp"><a target="_blank" rel="noopener" href="http://www.beian.miit.gov.cn/"><img class="icp-icon" src="/img/icp.png"/><span>湘ICP备20002952号</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);</script><div class="js-pjax"></div><script src="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@master/xkTool/v3.1.1/xkTool.js"></script><script defer src="https://cdn.jsdelivr.net/npm/hexo-theme-volantis@latest/source/js/issues.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  if (typeof gtag === 'function') {
    gtag('config', '', {'page_path': window.location.pathname});
  }

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>